# AWS Secrets Manager setup for External Secrets Operator using Access Keys
# This is an alternative setup for non-EKS clusters or development environments

---
# Secret containing AWS credentials
apiVersion: v1
kind: Secret
metadata:
  name: aws-secrets-manager-credentials
  namespace: external-secrets
type: Opaque
stringData:
  # Replace these with your actual AWS access keys
  # WARNING: This is for development only - use IAM roles in production
  access-key-id: "YOUR_AWS_ACCESS_KEY_ID"
  secret-access-key: "YOUR_AWS_SECRET_ACCESS_KEY"

---
# Cluster Secret Store for AWS Secrets Manager using Access Keys
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: aws-secrets-manager
spec:
  provider:
    aws:
      service: SecretsManager
      region: us-east-2
      auth:
        secretRef:
          accessKeyIDSecretRef:
            name: aws-secrets-manager-credentials
            namespace: external-secrets
            key: access-key-id
          secretAccessKeySecretRef:
            name: aws-secrets-manager-credentials
            namespace: external-secrets
            key: secret-access-key
